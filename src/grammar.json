{
  "name": "pico8",
  "rules": {
    "p8file": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "title"
        },
        {
          "type": "SYMBOL",
          "name": "lua"
        },
        {
          "type": "SYMBOL",
          "name": "gfx"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "map"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "sfx"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "music"
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "title": {
      "type": "STRING",
      "value": "pico-8 cartridge // http://www.pico-8.com\nversion 41"
    },
    "lua": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "__lua__"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "statement"
              }
            ]
          }
        }
      ]
    },
    "gfx": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "__gfx__"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "color0"
              },
              {
                "type": "SYMBOL",
                "name": "color1"
              },
              {
                "type": "SYMBOL",
                "name": "color2"
              },
              {
                "type": "SYMBOL",
                "name": "color3"
              },
              {
                "type": "SYMBOL",
                "name": "color4"
              },
              {
                "type": "SYMBOL",
                "name": "color5"
              },
              {
                "type": "SYMBOL",
                "name": "color6"
              },
              {
                "type": "SYMBOL",
                "name": "color7"
              },
              {
                "type": "SYMBOL",
                "name": "color8"
              },
              {
                "type": "SYMBOL",
                "name": "color9"
              },
              {
                "type": "SYMBOL",
                "name": "colora"
              },
              {
                "type": "SYMBOL",
                "name": "colorb"
              },
              {
                "type": "SYMBOL",
                "name": "colorc"
              },
              {
                "type": "SYMBOL",
                "name": "colord"
              },
              {
                "type": "SYMBOL",
                "name": "colore"
              },
              {
                "type": "SYMBOL",
                "name": "colorf"
              }
            ]
          }
        }
      ]
    },
    "map": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "__map__"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "PATTERN",
            "value": "[0-9a-f]"
          }
        }
      ]
    },
    "sfx": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "__sfx__"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "PATTERN",
            "value": "[0-9a-f]"
          }
        }
      ]
    },
    "music": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "__music__"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "PATTERN",
            "value": "[0-9a-f]"
          }
        }
      ]
    },
    "line_comment_lua": {
      "type": "PATTERN",
      "value": "--.*"
    },
    "line_comment_normal": {
      "type": "PATTERN",
      "value": "\\/\\/.*"
    },
    "block_comment": {
      "type": "PATTERN",
      "value": "--\\[\\[[\\w\\s]*\\]\\]"
    },
    "comment": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "line_comment_lua"
        },
        {
          "type": "SYMBOL",
          "name": "line_comment_normal"
        },
        {
          "type": "SYMBOL",
          "name": "block_comment"
        }
      ]
    },
    "variable": {
      "type": "PATTERN",
      "value": "[a-zA-Z_][0-9a-zA-Z_]*"
    },
    "still_variable": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "variable"
        },
        {
          "type": "PREC_LEFT",
          "value": 13,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "still_variable"
              },
              {
                "type": "STRING",
                "value": "."
              },
              {
                "type": "SYMBOL",
                "name": "variable"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 13,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "still_variable"
              },
              {
                "type": "STRING",
                "value": ":"
              },
              {
                "type": "SYMBOL",
                "name": "variable"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 13,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "still_variable"
              },
              {
                "type": "STRING",
                "value": "["
              },
              {
                "type": "FIELD",
                "name": "key",
                "content": {
                  "type": "SYMBOL",
                  "name": "expression"
                }
              },
              {
                "type": "STRING",
                "value": "]"
              }
            ]
          }
        }
      ]
    },
    "base": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "number"
        },
        {
          "type": "SYMBOL",
          "name": "string"
        },
        {
          "type": "SYMBOL",
          "name": "bool"
        },
        {
          "type": "SYMBOL",
          "name": "nil"
        }
      ]
    },
    "number": {
      "type": "CHOICE",
      "members": [
        {
          "type": "PATTERN",
          "value": "\\d+(\\.\\d*)?"
        },
        {
          "type": "PATTERN",
          "value": "\\.\\d+"
        },
        {
          "type": "PATTERN",
          "value": "0x[\\dabcdef]*(\\.[\\dabcdef]*)?"
        },
        {
          "type": "PATTERN",
          "value": "0h[01]*(\\.[01]*)?"
        }
      ]
    },
    "nil": {
      "type": "STRING",
      "value": "nil"
    },
    "bool": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "true"
        },
        {
          "type": "STRING",
          "value": "false"
        }
      ]
    },
    "string": {
      "type": "CHOICE",
      "members": [
        {
          "type": "PATTERN",
          "value": "\"[^\"\\\\]*(\\\\.[^\"\\\\]*)*\""
        },
        {
          "type": "PATTERN",
          "value": "'[^'\\\\]*(\\\\.[^'\\\\]*)*'"
        }
      ]
    },
    "expression": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "fn_define"
        },
        {
          "type": "SYMBOL",
          "name": "still_variable"
        },
        {
          "type": "SYMBOL",
          "name": "base"
        },
        {
          "type": "SYMBOL",
          "name": "binary_expression"
        },
        {
          "type": "SYMBOL",
          "name": "unary_expression"
        },
        {
          "type": "SYMBOL",
          "name": "table"
        },
        {
          "type": "SYMBOL",
          "name": "fn_call"
        }
      ]
    },
    "binary_expression": {
      "type": "CHOICE",
      "members": [
        {
          "type": "PREC_LEFT",
          "value": 1,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "or"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 2,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "and"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 3,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "=="
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 3,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "!="
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 3,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "~="
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 3,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "<"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 3,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "<="
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 3,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": ">"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 3,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": ">="
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 4,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "|"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 5,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "~"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 5,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "^^"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 6,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "&"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 7,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "<<"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 7,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": ">>"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 7,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": ">>>"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 7,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "<<>"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 7,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": ">><"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 9,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "+"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 9,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "-"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 10,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "*"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 10,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "/"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 10,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "%"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 10,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "\\"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 8,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": ".."
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 12,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": "^"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        }
      ]
    },
    "unary_expression": {
      "type": "CHOICE",
      "members": [
        {
          "type": "PREC_RIGHT",
          "value": 11,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "-"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 11,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "~"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 11,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "not"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 11,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "@"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 11,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "%"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 11,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "$"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_RIGHT",
          "value": 11,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "#"
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              }
            ]
          }
        },
        {
          "type": "PREC_LEFT",
          "value": 14,
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "("
              },
              {
                "type": "SYMBOL",
                "name": "expression"
              },
              {
                "type": "STRING",
                "value": ")"
              }
            ]
          }
        }
      ]
    },
    "assign_expression": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "local"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "var",
          "content": {
            "type": "SYMBOL",
            "name": "still_variable"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "="
            },
            {
              "type": "STRING",
              "value": "+="
            },
            {
              "type": "STRING",
              "value": "-="
            },
            {
              "type": "STRING",
              "value": "*="
            },
            {
              "type": "STRING",
              "value": "/="
            },
            {
              "type": "STRING",
              "value": "\\="
            },
            {
              "type": "STRING",
              "value": "%="
            },
            {
              "type": "STRING",
              "value": "^="
            },
            {
              "type": "STRING",
              "value": "|="
            },
            {
              "type": "STRING",
              "value": "&="
            },
            {
              "type": "STRING",
              "value": "^^="
            },
            {
              "type": "STRING",
              "value": "<<="
            },
            {
              "type": "STRING",
              "value": ">>="
            },
            {
              "type": "STRING",
              "value": ">>>="
            },
            {
              "type": "STRING",
              "value": "<<>="
            },
            {
              "type": "STRING",
              "value": ">><="
            },
            {
              "type": "STRING",
              "value": "..="
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "value",
          "content": {
            "type": "SYMBOL",
            "name": "expression"
          }
        }
      ]
    },
    "return_expression": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "return"
        },
        {
          "type": "SYMBOL",
          "name": "expression"
        }
      ]
    },
    "table": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "CHOICE",
                "members": [
                  {
                    "type": "SYMBOL",
                    "name": "expression"
                  },
                  {
                    "type": "SYMBOL",
                    "name": "assign_expression"
                  }
                ]
              },
              {
                "type": "STRING",
                "value": ","
              }
            ]
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "CHOICE",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "expression"
                },
                {
                  "type": "SYMBOL",
                  "name": "assign_expression"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "statement": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "fn_define"
        },
        {
          "type": "SYMBOL",
          "name": "fn_call"
        },
        {
          "type": "SYMBOL",
          "name": "assign_expression"
        },
        {
          "type": "SYMBOL",
          "name": "for_statement"
        },
        {
          "type": "SYMBOL",
          "name": "while_statement"
        },
        {
          "type": "SYMBOL",
          "name": "if_statement"
        },
        {
          "type": "SYMBOL",
          "name": "repeat_statement"
        },
        {
          "type": "SYMBOL",
          "name": "goto"
        },
        {
          "type": "SYMBOL",
          "name": "label"
        }
      ]
    },
    "fn_define": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "function"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "FIELD",
              "name": "def_name",
              "content": {
                "type": "CHOICE",
                "members": [
                  {
                    "type": "SYMBOL",
                    "name": "variable"
                  },
                  {
                    "type": "STRING",
                    "value": "_init"
                  },
                  {
                    "type": "STRING",
                    "value": "_update"
                  },
                  {
                    "type": "STRING",
                    "value": "_draw"
                  }
                ]
              }
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "FIELD",
                "name": "def_param",
                "content": {
                  "type": "SYMBOL",
                  "name": "variable"
                }
              },
              {
                "type": "STRING",
                "value": ","
              }
            ]
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "FIELD",
              "name": "def_param",
              "content": {
                "type": "SYMBOL",
                "name": "variable"
              }
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        },
        {
          "type": "FIELD",
          "name": "def_body",
          "content": {
            "type": "REPEAT",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "statement"
                },
                {
                  "type": "SYMBOL",
                  "name": "return_expression"
                }
              ]
            }
          }
        },
        {
          "type": "STRING",
          "value": "end"
        }
      ]
    },
    "fn_call": {
      "type": "PREC_LEFT",
      "value": 13,
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "FIELD",
                "name": "fn_name",
                "content": {
                  "type": "SYMBOL",
                  "name": "expression"
                }
              },
              {
                "type": "FIELD",
                "name": "builtin",
                "content": {
                  "type": "SYMBOL",
                  "name": "builtin"
                }
              }
            ]
          },
          {
            "type": "STRING",
            "value": "("
          },
          {
            "type": "REPEAT",
            "content": {
              "type": "SEQ",
              "members": [
                {
                  "type": "FIELD",
                  "name": "fn_param",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": ","
                }
              ]
            }
          },
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "FIELD",
                "name": "fn_param",
                "content": {
                  "type": "SYMBOL",
                  "name": "expression"
                }
              },
              {
                "type": "BLANK"
              }
            ]
          },
          {
            "type": "STRING",
            "value": ")"
          }
        ]
      }
    },
    "break": {
      "type": "STRING",
      "value": "break"
    },
    "goto": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "goto"
        },
        {
          "type": "PATTERN",
          "value": "\\w+"
        }
      ]
    },
    "label": {
      "type": "PATTERN",
      "value": "::\\w+::"
    },
    "for_statement": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "for"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "FIELD",
                  "name": "iterator",
                  "content": {
                    "type": "SYMBOL",
                    "name": "variable"
                  }
                },
                {
                  "type": "STRING",
                  "value": "="
                },
                {
                  "type": "FIELD",
                  "name": "start",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": ","
                },
                {
                  "type": "FIELD",
                  "name": "end",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "SEQ",
                      "members": [
                        {
                          "type": "STRING",
                          "value": ","
                        },
                        {
                          "type": "FIELD",
                          "name": "step",
                          "content": {
                            "type": "SYMBOL",
                            "name": "expression"
                          }
                        }
                      ]
                    },
                    {
                      "type": "BLANK"
                    }
                  ]
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "FIELD",
                  "name": "iter_index",
                  "content": {
                    "type": "SYMBOL",
                    "name": "variable"
                  }
                },
                {
                  "type": "STRING",
                  "value": ","
                },
                {
                  "type": "FIELD",
                  "name": "iter_value",
                  "content": {
                    "type": "SYMBOL",
                    "name": "variable"
                  }
                },
                {
                  "type": "STRING",
                  "value": "in"
                },
                {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "STRING",
                      "value": "pairs"
                    },
                    {
                      "type": "STRING",
                      "value": "ipairs"
                    }
                  ]
                },
                {
                  "type": "STRING",
                  "value": "("
                },
                {
                  "type": "FIELD",
                  "name": "table_name",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": ")"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "FIELD",
                  "name": "iterator",
                  "content": {
                    "type": "SYMBOL",
                    "name": "variable"
                  }
                },
                {
                  "type": "STRING",
                  "value": "in"
                },
                {
                  "type": "STRING",
                  "value": "all"
                },
                {
                  "type": "STRING",
                  "value": "("
                },
                {
                  "type": "FIELD",
                  "name": "table_name",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": ")"
                }
              ]
            }
          ]
        },
        {
          "type": "STRING",
          "value": "do"
        },
        {
          "type": "FIELD",
          "name": "for_body",
          "content": {
            "type": "REPEAT",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "statement"
                },
                {
                  "type": "SYMBOL",
                  "name": "break"
                }
              ]
            }
          }
        },
        {
          "type": "STRING",
          "value": "end"
        }
      ]
    },
    "while_statement": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "while"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "("
                },
                {
                  "type": "FIELD",
                  "name": "condition",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": ")"
                },
                {
                  "type": "FIELD",
                  "name": "while_body",
                  "content": {
                    "type": "REPEAT",
                    "content": {
                      "type": "CHOICE",
                      "members": [
                        {
                          "type": "SYMBOL",
                          "name": "statement"
                        },
                        {
                          "type": "SYMBOL",
                          "name": "break"
                        }
                      ]
                    }
                  }
                },
                {
                  "type": "STRING",
                  "value": "\n"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "FIELD",
                  "name": "condition",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": "do"
                },
                {
                  "type": "FIELD",
                  "name": "while_body",
                  "content": {
                    "type": "REPEAT",
                    "content": {
                      "type": "CHOICE",
                      "members": [
                        {
                          "type": "SYMBOL",
                          "name": "statement"
                        },
                        {
                          "type": "SYMBOL",
                          "name": "break"
                        }
                      ]
                    }
                  }
                },
                {
                  "type": "STRING",
                  "value": "end"
                }
              ]
            }
          ]
        }
      ]
    },
    "if_statement": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "FIELD",
                  "name": "condition",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": "then"
                },
                {
                  "type": "FIELD",
                  "name": "if_body",
                  "content": {
                    "type": "REPEAT",
                    "content": {
                      "type": "SYMBOL",
                      "name": "statement"
                    }
                  }
                },
                {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "SEQ",
                      "members": [
                        {
                          "type": "STRING",
                          "value": "elseif"
                        },
                        {
                          "type": "FIELD",
                          "name": "elseif_condition",
                          "content": {
                            "type": "SYMBOL",
                            "name": "expression"
                          }
                        },
                        {
                          "type": "STRING",
                          "value": "then"
                        },
                        {
                          "type": "FIELD",
                          "name": "elseif_body",
                          "content": {
                            "type": "REPEAT",
                            "content": {
                              "type": "SYMBOL",
                              "name": "statement"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "type": "BLANK"
                    }
                  ]
                },
                {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "SEQ",
                      "members": [
                        {
                          "type": "STRING",
                          "value": "else"
                        },
                        {
                          "type": "FIELD",
                          "name": "else_body",
                          "content": {
                            "type": "REPEAT",
                            "content": {
                              "type": "SYMBOL",
                              "name": "statement"
                            }
                          }
                        }
                      ]
                    },
                    {
                      "type": "BLANK"
                    }
                  ]
                },
                {
                  "type": "STRING",
                  "value": "end"
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "("
                },
                {
                  "type": "FIELD",
                  "name": "condition",
                  "content": {
                    "type": "SYMBOL",
                    "name": "expression"
                  }
                },
                {
                  "type": "STRING",
                  "value": ")"
                },
                {
                  "type": "REPEAT",
                  "content": {
                    "type": "SYMBOL",
                    "name": "statement"
                  }
                },
                {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "SEQ",
                      "members": [
                        {
                          "type": "STRING",
                          "value": "else"
                        },
                        {
                          "type": "REPEAT1",
                          "content": {
                            "type": "SYMBOL",
                            "name": "statement"
                          }
                        }
                      ]
                    },
                    {
                      "type": "BLANK"
                    }
                  ]
                },
                {
                  "type": "STRING",
                  "value": "\n"
                }
              ]
            }
          ]
        }
      ]
    },
    "repeat_statement": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "repeat"
        },
        {
          "type": "FIELD",
          "name": "repeat_body",
          "content": {
            "type": "REPEAT",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "statement"
                },
                {
                  "type": "SYMBOL",
                  "name": "break"
                }
              ]
            }
          }
        },
        {
          "type": "STRING",
          "value": "until"
        },
        {
          "type": "FIELD",
          "name": "condition",
          "content": {
            "type": "SYMBOL",
            "name": "expression"
          }
        }
      ]
    },
    "builtin": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "load"
        },
        {
          "type": "STRING",
          "value": "sspr"
        },
        {
          "type": "STRING",
          "value": "save"
        },
        {
          "type": "STRING",
          "value": "ls"
        },
        {
          "type": "STRING",
          "value": "run"
        },
        {
          "type": "STRING",
          "value": "stop"
        },
        {
          "type": "STRING",
          "value": "assert"
        },
        {
          "type": "STRING",
          "value": "reset"
        },
        {
          "type": "STRING",
          "value": "flip"
        },
        {
          "type": "STRING",
          "value": "printh"
        },
        {
          "type": "STRING",
          "value": "time"
        },
        {
          "type": "STRING",
          "value": "t"
        },
        {
          "type": "STRING",
          "value": "stat"
        },
        {
          "type": "STRING",
          "value": "extcmd"
        },
        {
          "type": "STRING",
          "value": "clip"
        },
        {
          "type": "STRING",
          "value": "pset"
        },
        {
          "type": "STRING",
          "value": "pget"
        },
        {
          "type": "STRING",
          "value": "sget"
        },
        {
          "type": "STRING",
          "value": "sset"
        },
        {
          "type": "STRING",
          "value": "fget"
        },
        {
          "type": "STRING",
          "value": "fset"
        },
        {
          "type": "STRING",
          "value": "print"
        },
        {
          "type": "STRING",
          "value": "cursor"
        },
        {
          "type": "STRING",
          "value": "color"
        },
        {
          "type": "STRING",
          "value": "cls"
        },
        {
          "type": "STRING",
          "value": "camera"
        },
        {
          "type": "STRING",
          "value": "circ"
        },
        {
          "type": "STRING",
          "value": "circfill"
        },
        {
          "type": "STRING",
          "value": "oval"
        },
        {
          "type": "STRING",
          "value": "ovalfill"
        },
        {
          "type": "STRING",
          "value": "line"
        },
        {
          "type": "STRING",
          "value": "rect"
        },
        {
          "type": "STRING",
          "value": "rectfill"
        },
        {
          "type": "STRING",
          "value": "pal"
        },
        {
          "type": "STRING",
          "value": "palt"
        },
        {
          "type": "STRING",
          "value": "spr"
        },
        {
          "type": "STRING",
          "value": "fillp"
        },
        {
          "type": "STRING",
          "value": "add"
        },
        {
          "type": "STRING",
          "value": "del"
        },
        {
          "type": "STRING",
          "value": "deli"
        },
        {
          "type": "STRING",
          "value": "count"
        },
        {
          "type": "STRING",
          "value": "all"
        },
        {
          "type": "STRING",
          "value": "foreach"
        },
        {
          "type": "STRING",
          "value": "pairs"
        },
        {
          "type": "STRING",
          "value": "btn"
        },
        {
          "type": "STRING",
          "value": "btnp"
        },
        {
          "type": "STRING",
          "value": "sfx"
        },
        {
          "type": "STRING",
          "value": "music"
        },
        {
          "type": "STRING",
          "value": "mget"
        },
        {
          "type": "STRING",
          "value": "mset"
        },
        {
          "type": "STRING",
          "value": "map"
        },
        {
          "type": "STRING",
          "value": "tline"
        },
        {
          "type": "STRING",
          "value": "peek"
        },
        {
          "type": "STRING",
          "value": "poke"
        },
        {
          "type": "STRING",
          "value": "memcpy"
        },
        {
          "type": "STRING",
          "value": "reload"
        },
        {
          "type": "STRING",
          "value": "cstore"
        },
        {
          "type": "STRING",
          "value": "memset"
        },
        {
          "type": "STRING",
          "value": "max"
        },
        {
          "type": "STRING",
          "value": "min"
        },
        {
          "type": "STRING",
          "value": "mid"
        },
        {
          "type": "STRING",
          "value": "flr"
        },
        {
          "type": "STRING",
          "value": "ceil"
        },
        {
          "type": "STRING",
          "value": "cos"
        },
        {
          "type": "STRING",
          "value": "sin"
        },
        {
          "type": "STRING",
          "value": "sqrt"
        },
        {
          "type": "STRING",
          "value": "abs"
        },
        {
          "type": "STRING",
          "value": "rnd"
        },
        {
          "type": "STRING",
          "value": "srand"
        },
        {
          "type": "STRING",
          "value": "menuitem"
        },
        {
          "type": "STRING",
          "value": "tostr"
        },
        {
          "type": "STRING",
          "value": "tonum"
        },
        {
          "type": "STRING",
          "value": "chr"
        },
        {
          "type": "STRING",
          "value": "ord"
        },
        {
          "type": "STRING",
          "value": "sub"
        },
        {
          "type": "STRING",
          "value": "split"
        },
        {
          "type": "STRING",
          "value": "type"
        },
        {
          "type": "STRING",
          "value": "cartdata"
        },
        {
          "type": "STRING",
          "value": "dget"
        },
        {
          "type": "STRING",
          "value": "dset"
        },
        {
          "type": "STRING",
          "value": "setmetatable"
        },
        {
          "type": "STRING",
          "value": "getmetatable"
        },
        {
          "type": "STRING",
          "value": "rawset"
        },
        {
          "type": "STRING",
          "value": "rawget"
        },
        {
          "type": "STRING",
          "value": "rawlen"
        },
        {
          "type": "STRING",
          "value": "cocreate"
        },
        {
          "type": "STRING",
          "value": "coresume"
        },
        {
          "type": "STRING",
          "value": "costatus"
        },
        {
          "type": "STRING",
          "value": "yield"
        },
        {
          "type": "STRING",
          "value": "_init"
        },
        {
          "type": "STRING",
          "value": "_update"
        },
        {
          "type": "STRING",
          "value": "_draw"
        },
        {
          "type": "STRING",
          "value": "ipairs"
        },
        {
          "type": "STRING",
          "value": "pack"
        },
        {
          "type": "STRING",
          "value": "unpac"
        },
        {
          "type": "STRING",
          "value": "next"
        },
        {
          "type": "STRING",
          "value": "peek2"
        },
        {
          "type": "STRING",
          "value": "peek4"
        },
        {
          "type": "STRING",
          "value": "poke2"
        },
        {
          "type": "STRING",
          "value": "poke4"
        },
        {
          "type": "STRING",
          "value": "serial"
        },
        {
          "type": "STRING",
          "value": "atan2"
        },
        {
          "type": "STRING",
          "value": "band"
        },
        {
          "type": "STRING",
          "value": "bnot"
        },
        {
          "type": "STRING",
          "value": "bor"
        },
        {
          "type": "STRING",
          "value": "bxor"
        },
        {
          "type": "STRING",
          "value": "lshr"
        },
        {
          "type": "STRING",
          "value": "rotl"
        },
        {
          "type": "STRING",
          "value": "rotr"
        },
        {
          "type": "STRING",
          "value": "sgn"
        },
        {
          "type": "STRING",
          "value": "shl"
        },
        {
          "type": "STRING",
          "value": "shr"
        },
        {
          "type": "STRING",
          "value": "rawequal"
        },
        {
          "type": "STRING",
          "value": "select"
        },
        {
          "type": "STRING",
          "value": "trace"
        }
      ]
    },
    "color0": {
      "type": "STRING",
      "value": "0"
    },
    "color1": {
      "type": "STRING",
      "value": "1"
    },
    "color2": {
      "type": "STRING",
      "value": "2"
    },
    "color3": {
      "type": "STRING",
      "value": "3"
    },
    "color4": {
      "type": "STRING",
      "value": "4"
    },
    "color5": {
      "type": "STRING",
      "value": "5"
    },
    "color6": {
      "type": "STRING",
      "value": "6"
    },
    "color7": {
      "type": "STRING",
      "value": "7"
    },
    "color8": {
      "type": "STRING",
      "value": "8"
    },
    "color9": {
      "type": "STRING",
      "value": "9"
    },
    "colora": {
      "type": "STRING",
      "value": "a"
    },
    "colorb": {
      "type": "STRING",
      "value": "b"
    },
    "colorc": {
      "type": "STRING",
      "value": "c"
    },
    "colord": {
      "type": "STRING",
      "value": "d"
    },
    "colore": {
      "type": "STRING",
      "value": "e"
    },
    "colorf": {
      "type": "STRING",
      "value": "f"
    }
  },
  "extras": [
    {
      "type": "PATTERN",
      "value": "\\s"
    },
    {
      "type": "SYMBOL",
      "name": "line_comment_lua"
    },
    {
      "type": "SYMBOL",
      "name": "line_comment_normal"
    },
    {
      "type": "SYMBOL",
      "name": "block_comment"
    }
  ],
  "conflicts": [
    [
      "statement",
      "expression"
    ]
  ],
  "precedences": [],
  "externals": [],
  "inline": [],
  "supertypes": []
}

